#ifndef SCHOOLBUS_H
#define SCHOOLBUS_H

#include "Graph.h"
#include "Bus.h"
#include "Utilities.h"
#include "Graphviewer.h"
#include <vector>
#include <string>
#include <sstream>
#include <ctime>
#include <fstream>

/**
 * @brief Class that represents the Bus Company
 */
class SchoolBus {
	GraphViewer *gv;
	Graph <int> routesGraph;
	vector <Bus> bus;
	vector <School *> schools;
	int nodeID = 0;
public:
	/**
	 * @brief SchooBus's default constructor
	 */
	SchoolBus();

	/**
	 * @brief SchoolBus's constructor
	 *
	 * @param graph of the map to be used
	 */
	SchoolBus(const Graph<int> &graph);

	/**
	 * @brief adds a new bus the company
	 *
	 * @param bus to be added
	 */
	void addBus(const Bus &bus);

	/**
	 * @brief returns the company's bus
	 *
	 * @return bus
	 */
	vector <Bus> getBus() const;

	/**
	 * @brief adds a new school the company
	 *
	 * @param school to be added
	 */
	void addSchool(School * school);

	/**
	 * @brief returns the schools which are operated by the company
	 *
	 * @return schools
	 */
	vector <School *> getSchools() const;

	/**
	 * @brief returns the zone's graph where the company operates
	 *
	 * @return graph
	 */
	Graph <int> getRoutesGraph() const;

	/**
	 * @brief Convertes a vector of integers (vextex->info()) to a vector of the corresponding Vertex
	 *
	 * @param vector with the Vertex info
	 * @return vector with the Vertex
	 */
	vector<Vertex<int>*> getInttoVertex(vector <int> &vec);

	/**
	 * @brief Shows the graph
	 */
	void showGraph(int srcNode, int destNod);

	/**
	 * @brief Generate the best route between 2 nodes and passing in some mandatory nodes
	 *
	 * @param srcNode
	 * @param destNode
	 * @param stops
	 */
	void generateRoute(int srcNode, int destNod, vector<int> stops);

	/**
	 * @brief Saves bus to a csv file
	 */
	void saveBus();

	/**
		 * @brief Saves schools to a csv file
		 */
	void saveSchools();

	/**
		 * @brief Saves students to a csv file
		 */
	void saveStudents();

	/**
		 * @brief Saves the info of the bus, schools and students
		 */
	void saveData();

	/**
		 * @brief Loads bus from a csv file
		 */
	void loadBus();

	/**
			 * @brief Loads schools from a csv file
			 */
	void loadSchools();

	/**
			 * @brief Loads students from a csv file
			 */
	void loadStudents();

	/**
			 * @brief Loads all data
			 */
	void loadData();

	/**
			 * @brief Menu showing all bus
			 */
	void menuShowBus();

	/**
				 * @brief Menu showing all schools
				 */
	void menuShowSchools();

	/**
				 * @brief Menu showing all students
				 */
	void menuShowStudents();

	/**
				 * @brief Starting menu
				 */
	void menuStarting();

	/**
				 * @brief Search a school by schoolID
				 *
				 * @param schoolID
				 */
	void searchSchoolID(int schoolID);

	/**
					 * @brief Search a school by name
					 *
					 * @param name
					 */
	void searchSchoolName(string schoolName);
	void menuSearchSchool();
	bool validSchoolName(const string &name);
	string registerSchoolName();
	bool validNodeID(int nodeID);
	int registerSchoolNodeID();
	void registerNewSchool();
	void menuSchoolManagement();
	void menuClientManagement();
	void searchBusID(int busID);
	void searchBusReg(string busReg);
	void menuSearchBus();
	int registerBusYear();
	bool validRegistration(const string &reg);
	string registerBusRegistration();
	int registerBusCapacity();
	bool validBusSchoolID(int id);
	int registerBusSchool();
	void registerNewBus();
	string registerStudentName();
	int registerStudentSchool();
	bool validBus(int stuBus, int schoolID);
	int resgisterStudentBus(int schoolID);
	int registerStudentNode();
	void registerNewClient();
	void menuBusManagement();
};

#endif // SCHOOLBUS_H
