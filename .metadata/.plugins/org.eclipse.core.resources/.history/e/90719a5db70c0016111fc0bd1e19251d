#ifndef SCHOOLBUS_H
#define SCHOOLBUS_H

#include "Graph.h"
#include "Bus.h"
#include "Utilities.h"
#include "Graphviewer.h"
#include <vector>
#include <string>
#include <sstream>
#include <ctime>
#include <fstream>

/**
 * @brief Class that represents the Bus Company
 */
class SchoolBus {
	GraphViewer *gv;
	Graph <int> routesGraph;
	vector <Bus> bus;
	vector <School *> schools;
	int nodeID = 0;
public:
	/**
	 * @brief SchooBus's default constructor
	 */
	SchoolBus();

	/**
	 * @brief SchoolBus's constructor
	 *
	 * @param graph of the map to be used
	 */
	SchoolBus(const Graph<int> &graph);

	/**
	 * @brief adds a new bus the company
	 *
	 * @param bus to be added
	 */
	void addBus(const Bus &bus);

	/**
	 * @brief returns the company's bus
	 *
	 * @return bus
	 */
	vector <Bus> getBus() const;

	/**
	 * @brief adds a new school the company
	 *
	 * @param school to be added
	 */
	void addSchool(School * school);

	/**
	 * @brief returns the schools which are operated by the company
	 *
	 * @return schools
	 */
	vector <School *> getSchools() const;

	/**
	 * @brief returns the zone's graph where the company operates
	 *
	 * @return graph
	 */
	Graph <int> getRoutesGraph() const;

	/**
	 * @brief Convertes a vector of integers (vextex->info()) to a vector of the corresponding Vertex
	 *
	 * @param vector with the Vertex info
	 * @return vector with the Vertex
	 */
	vector<Vertex<int>*> getInttoVertex(vector <int> &vec);

	/**
	 * @brief returns the schools which are operated by the company
	 */
	void showGraph(int srcNode, int destNod);
	void generateRoute(int srcNode, int destNod, vector<int> stops);
	void saveBus();
	void saveSchools();
	void saveStudents();
	void saveData();
	void loadBus();
	void loadSchools();
	void loadStudents();
	void loadData();
	void menuShowBus();
	void menuShowSchools();
	void menuShowStudents();
	void menuStarting();
	void searchSchoolID(int schoolID);
	void searchSchoolName(string busReg);
	void menuSearchSchool();
	bool validSchoolName(const string &name);
	string registerSchoolName();
	bool validNodeID(int nodeID);
	int registerSchoolNodeID();
	void registerNewSchool();
	void menuSchoolManagement();
	void menuClientManagement();
	void searchBusID(int busID);
	void searchBusReg(string busReg);
	void menuSearchBus();
	int registerBusYear();
	bool validRegistration(const string &reg);
	string registerBusRegistration();
	int registerBusCapacity();
	bool validBusSchoolID(int id);
	int registerBusSchool();
	void registerNewBus();
	string registerStudentName();
	int registerStudentSchool();
	bool validBus(int stuBus, int schoolID);
	int resgisterStudentBus(int schoolID);
	int registerStudentNode();
	void registerNewClient();
	void menuBusManagement();
};

#endif // SCHOOLBUS_H
