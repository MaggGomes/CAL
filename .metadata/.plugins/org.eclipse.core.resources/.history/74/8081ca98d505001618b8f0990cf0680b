#include "Menu.h"

Menu::Menu(){};
// TODO FALTA IMPLEMENTAR SAVE E LOAD DATA
void Menu::loadData(){};
void Menu::saveData(){};

void Menu::createStartingMenu(){
	string Menu[4] = { "<<   VISITANTE        >>", "<<   UTILIZADOR       >>", "<<   ADMINISTRADOR    >>", "<<   SAIR             >>" };
		bool validade = true;
		int pointer = 0;

		while (validade)
		{
			clrscr();
			printAppName;
			setColor(11, 0);
			cout << setw(51) << "<<<<< MENU INICIAL >>>>>" << endl << endl;

			for (int i = 0; i < 4; ++i)
			{
				if (i == pointer)
				{
					cout << "                           ";
					setcolor(3, 1);
					cout << Menu[i] << endl << endl;
				}
				else
				{
					setcolor(3, 0);
					cout << setw(51) << Menu[i] << endl << endl;
				}
			}
			setcolor(7, 0);

			while (validade)
			{
				int ch = _getch();

				if (ch == 0 || ch == 224)
					ch = 256 + _getch();

				if (ch == ARROW_DOWN) {
					Beep(250, 160);
					pointer += 1;
					if (pointer == 4)
					{
						pointer = 0;
					}
					break;
				}

				if (ch == ARROW_UP){
					Beep(250, 160);
					pointer -= 1;
					if (pointer == -1)
					{
						pointer = 3;
					}
					break;
				}

				if (ch == '\r')
				{
					setcolor(7, 0);
					Beep(200, 160);

					switch (pointer)
					{
					case 0:
						validade = false;
						createMenuVisitante();
						break;
					case 1:
						validade = false;
						createMenuUser();
						break;
					case 2:
						validade = false;
						createMenuAdmin();
						break;
					case 3:
						saveData();
						exiting();
					}
				}
			}
		}
}
